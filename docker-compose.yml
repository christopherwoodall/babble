services:
  splunk:
    image: splunk/splunk:latest

    environment:
      - SPLUNK_START_ARGS=--accept-license
      # - SPLUNK_APPS_URL=/tmp/app.tgz,https://webserver/apps/app.spl,https://splunkbase.splunk.com/app/2890/release/4.1.0/download
      # - SPLUNKBASE_USERNAME=${SPLUNKBASE_USER:-splunk}
      # - SPLUNKBASE_PASSWORD=${SPLUNKBASE_PASS:-changeme}
      # - SPLUNK_LICENSE_URI=Free
      - SPLUNK_USER=root
      - SPLUNK_PASSWORD=changeme
      - DEBUG=true

    volumes:
      # - ../:/app:z
      - ./data:/data:z
      - ./data/splunk/var:/opt/splunk/var:z
      - ./data/splunk/etc:/opt/splunk/etc:z

    # command: "cd /app && pip install -e . && ( babble ) &"
    command: "touch /data/test && tail -f /data/test"

    ports:
      - 8000:8000


  # splunk-uf:
  #   image: splunk/splunk/universalforwarder:latest

# Documentation:
#  - https://hub.docker.com/r/splunk/splunk/
#  - https://splunk.github.io/docker-splunk/
#  - https://github.com/splunk/botsv3
